<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentZero HR Analytics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/additional-styles.css') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode">ðŸŒ“</button>
        <div class="dashboard-header">
            <h1>AgentZero HR Analytics</h1>
            <div>
                <span>Welcome, {{ user.username }}!</span>
                <a href="{{ url_for('dashboard') }}"><button>Dashboard</button></a>
                {% if user.is_admin %}
                <a href="{{ url_for('admin_panel') }}"><button>Admin Panel</button></a>
                {% endif %}
                <a href="{{ url_for('logout') }}"><button class="logout-btn">Logout</button></a>
                <a href="{{ url_for('help') }}"><button>Help</button></a>
            </div>
        </div>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <p class="{{ category }}">{{ message }}</p>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="user-settings">
            <label for="chartTypeSelector">Chart Type:</label>
            <select id="chartTypeSelector">
                <option value="bar">Bar</option>
                <option value="line">Line</option>
                <option value="radar">Radar</option>
            </select>

            <label for="dataFilter">Filter Data:</label>
            <select id="dataFilter">
                <option value="all">All</option>
                <option value="department">By Department</option>
                <option value="age">By Age Group</option>
            </select>
        </div>

        <div class="dashboard-grid">
            <div class="dashboard-card" id="performance-card">
                <h2>Predict Employee Performance</h2>
                <form id="performance-form">
                    <label for="age">Age:</label>
                    <input type="number" id="age" required min="18" max="100">
                    
                    <label for="years_at_company">Years at Company:</label>
                    <input type="number" id="years_at_company" required min="0" max="50">
                    
                    <label for="years_in_current_role">Years in Current Role:</label>
                    <input type="number" id="years_in_current_role" required min="0" max="50">
                    
                    <label for="job_satisfaction">Job Satisfaction (1-5):</label>
                    <input type="number" id="job_satisfaction" min="1" max="5" required>
                    
                    <label for="job_involvement">Job Involvement (1-5):</label>
                    <input type="number" id="job_involvement" min="1" max="5" required>
                    
                    <label for="relationship_satisfaction">Relationship Satisfaction (1-5):</label>
                    <input type="number" id="relationship_satisfaction" min="1" max="5" required>
                    
                    <label for="work_life_balance">Work Life Balance (1-5):</label>
                    <input type="number" id="work_life_balance" min="1" max="5" required>
                    
                    <button type="submit">Predict Performance</button>
                </form>
                <div id="performance-result"></div>
                <div id="performance-error" class="error"></div>
                <div class="spinner" id="performance-spinner"></div>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>
            </div>
            
            <div class="dashboard-card" id="team-card">
                <h2>Form Optimal Team</h2>
                <form id="team-form">
                    <label for="team_size">Team Size:</label>
                    <input type="number" id="team_size" required min="2" max="20">
                    
                    <label for="required_skills">Required Skills (comma-separated):</label>
                    <input type="text" id="required_skills" required pattern="^[a-zA-Z]+(,[a-zA-Z]+)*$">
                    
                    <button type="submit">Form Team</button>
                </form>
                <div id="team-result"></div>
                <div id="team-error" class="error"></div>
                <div class="spinner" id="team-spinner"></div>
                <div class="chart-container">
                    <canvas id="team-chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/user-settings.js') }}"></script>
    <script src="{{ url_for('static', filename='js/notifications.js') }}"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/static/js/service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html><!-- Test comment -->
